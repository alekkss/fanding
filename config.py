# -*- coding: utf-8 -*-
"""–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ –±–æ—Ç–∞"""

# API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
API_BASE_URL = "https://api.bybit.com/v5"
RECV_WINDOW = "5000"

# –¢–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
TRADE_AMOUNT_USD = 30.0
LEVERAGE = 1

# –ü–æ—Ä–æ–≥–∏ –¥–ª—è –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
MIN_SPREAD_PCT = 0.0
MIN_ENTRY_SPREAD_PCT = 0.45
MIN_FUNDING_RATE = 0.02
MIN_PROFIT_PCT = -0.2
COMMISSION_PCT = 0.27

CLOSE_FR_THRESHOLD = -0.001
MAX_CLOSE_SPREAD_PCT = 0.15

# ========================================
# üÜï –ù–û–í–û–ï: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–∫—É–ø–∫–∏ –ø–æ–∑–∏—Ü–∏–π
# ========================================

# –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–æ–∫—É–ø–æ–∫
ENABLE_POSITION_ADDITIONS = True

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–ø–æ–∫ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é (–Ω–µ –≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥)
MAX_POSITION_ADDITIONS = 3  # –ò—Ç–æ–≥–æ: 1 –Ω–∞—á–∞–ª—å–Ω—ã–π + 3 –¥–æ–∫—É–ø–∫–∏ = 4 –≤—Ö–æ–¥–∞

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç —Å–ø—Ä–µ–¥–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –¥–æ–∫—É–ø–∫–∏ (%)
# –ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –≤—Ö–æ–¥ –±—ã–ª –Ω–∞ 0.45%, —Ç–æ –¥–æ–∫—É–ø–∫–∞ –±—É–¥–µ—Ç –Ω–∞ 0.60% (0.45 + 0.15)
ADDITION_SPREAD_INCREMENT = 0.15

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É –¥–æ–∫—É–ø–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
ADDITION_COOLDOWN_SEC = 300  # 5 –º–∏–Ω—É—Ç

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π FR –¥–ª—è –¥–æ–∫—É–ø–∫–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 0)
MIN_FUNDING_RATE_FOR_ADDITION = 0.0

# ========================================

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
MONITOR_INTERVAL_SEC = 300
MAX_MONITOR_ATTEMPTS = 1000

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Ç–æ–∫–æ–≤
MAX_WORKERS_ORDERBOOK = 20
MAX_WORKERS_FUNDING = 10

# Rate Limiting
MAX_REQUESTS_PER_SECOND = 50  # –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (Bybit –ª–∏–º–∏—Ç: 120)
MAX_WEIGHT_PER_SECOND = 300   # –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (Bybit –ª–∏–º–∏—Ç: 600)

# ========================================
# ‚úÖ –ù–û–í–û–ï: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# ========================================
DATABASE_URL = "sqlite:///./arbitrage.db"  # SQLite —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

# –î–ª—è PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ):
# DATABASE_URL = "postgresql://user:password@localhost:5432/arbitrage_db"

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å—Ç–∞—Ä—ã—Ö JSON —Ñ–∞–π–ª–æ–≤ (deprecated, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏)
LEGACY_POSITIONS_DIR = "positions_legacy"  # –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
# ========================================


# –ù–û–í–û–ï: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
MAX_CONCURRENT_POSITIONS = 1  # –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
MAX_TRADING_THREADS = 3       # –ú–∞–∫—Å–∏–º—É–º –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
POSITIONS_DIR = "positions"  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π (DEPRECATED - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–î)
SCAN_INTERVAL_SEC = 180        # –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

# –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ (DEPRECATED - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–î)
POSITION_FILE = "open_position.json"

# ‚úÖ –ù–û–í–û–ï: –°–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
BLACKLIST_FILE = "blacklist.json"

# ‚úÖ –ù–û–í–û–ï: –ö–æ–¥—ã –æ—à–∏–±–æ–∫, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ blacklist
CRITICAL_ERROR_CODES = [
    30228,  # No new positions during delisting
    10001,  # Symbol not found
    110043, # Set margin mode failed (suspended trading)
]

LOW_FR_TRACKING_THRESHOLD = 0.01
MIN_FUNDING_PAYMENTS_FOR_CLOSE = 15
